sudo: required
cache: false
language: python
services:
- docker
env:
  global:
  - BUILD_DIR=builds
  - secure: "i9Jk/YX7VGEg1ONSOEZppkkR0i84b6nYq31uwGpj6EyT/83fZw0lSvPoYbIzfFpKOr9e2gSIt4JSFfRbrxeFPCN/zc5vp24cGLq2JsdXoEEd1kvOO839Gx1GA3dtGR99YdZEaLE2ZBY/Yoiuwf1l7RAbHWqmB34n0TVmbdH+p6GEaFvA7+RNAOWLVyOUPsPrF9HTQDZ/VYPyarm2uGu0nSV/s9Ub9iv/VjvGcJklh7A9SURPcdeyBqG7pWdgjDQN7nAH/Uo7ZA6n3pmwkn0BV12BtaNszBtBgYoqvMX4EtwUmmAARrZpDn+p5Gp7zp3aGQK5EfjlQl28ymm/+NURuXHXVb7a4DEgccZ3Vtkv6lzSVd5jEvhklAYFOmpGZRk0GdjF1f5libRMuucXJK0u16AYcMM0RylxoRd12qZuq2Ry/hvs1WWMawdPBEwpxkwEDY9WzK+80HsdUwtgQ+I8qvou1vffYgynW9ltK+Tt5goaGR13AhPIK8J0c16/uAM3U396uY0y7/8zqWpOGxrr+99AWnna3WaiUzMrBRfLbF2sG8oK2nrVvCqvlj/g+cIvQfdMeYc7/yI3BQTUAqlBLxE8yna43od9CZa3Kx4MIgQt8xTrmJ3JH0nSA8tW33JJgAsAsfPS7bIF+JbEGLnbR86quX61FqxR1u0sqQ6I4FM="
  - secure: "aA/pFr0rMXDd693hx4sOGzHy8TjmrQ4IqS2E3MqHNPnkwtq9PmBlPREOdsf8Al7wp+w6MwJW9xLG7TlJnaPfXDtJSQrY9nsaW/Gg0FnrBMOrQMUNVJevikDZ1JoZFtYWEiW4qr4cMsOP8TAPF0i/5rTFz7+8nWh9+hrDd7ZqafGfvNK84Eq9EW3c52D39F8hVKerKK9qMABks8ZIr2SWwfyIc4MS2LLxpG/8xugNwu8pBF714IJbUqzyCpozqaW+SN5+/SlQixjCEW/PT1RO62l7Th0eisThUke9ISW4wMWkQKmGtMHkdP3LbdKMjOy409Ij3OlvqyGyeIuzON7iluxEKorLe7j0qhYijusH5b/NB2GXkf3VoxxuMjdieKe1wDbmtG9kxaKg6HCGlYv4U6GdDzju03u5wjXm0W0cs1sxBqICADI6CaO6w12RELWcIeLKgHqI+VOkTqfiAHClAJJHL7KB/9JQTHBXcksjhiOsX952lPubvJHMYvSMowfzsq57eJvN2yTJ4pVwe9vRf74Sv+w0tRwTOyVVXFDShUFRMcb7/LeOcQkPuLovY5XhABBQ+NXqFoNA+e5K5LFTaGZSnhfeJHhvNlIqwc7JBspTUS7IQ3734IzLR75xBSi7+ouABf6ZYu3G1PrgE6q4IOROqRrOq0kLnevU5+nDcLc="
  matrix:
  - IMAGE_NAME=python_2.7
  - IMAGE_NAME=python_3.5
  - IMAGE_NAME=python_3.6
  - IMAGE_NAME=pypy_2
  - IMAGE_NAME=pypy_3
  - IMAGE_NAME=anaconda_2
  - IMAGE_NAME=anaconda_3
script:
  - echo "$DOCKERHUB_PASSWORD" | docker login -u "$DOCKERHUB_USER" --password-stdin
  - docker build --no-cache --pull -t ${IMAGE_NAME} ${BUILD_DIR}/${IMAGE_NAME}
  - docker tag ${IMAGE_NAME} $DOCKERHUB_USER/${IMAGE_NAME}
  - docker push ${IMAGE_NAME} $DOCKERHUB_USER/${IMAGE_NAME}
